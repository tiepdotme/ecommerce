{"version":3,"sources":["webpack:///./node_modules/@ecomplus/storefront-router/src/methods/map.js","webpack:///./node_modules/@ecomplus/storefront-router/src/methods/resolve.js","webpack:///./node_modules/@ecomplus/storefront-router/src/methods/list.js","webpack:///./node_modules/@ecomplus/storefront-router/src/methods/setup-store.js","webpack:///./node_modules/@ecomplus/storefront-router/src/index.js","webpack:///./node_modules/@ecomplus/storefront-components/src/scss/ABackdrop.scss?f1db","webpack:///./node_modules/@ecomplus/storefront-components/src/html/ABackdrop.html","webpack:///./node_modules/@ecomplus/storefront-components/src/js/ABackdrop.js?e2da","webpack:///./node_modules/@ecomplus/storefront-components/src/js/ABackdrop.js","webpack:///./node_modules/@ecomplus/storefront-components/src/ABackdrop.vue","webpack:///./node_modules/@ecomplus/storefront-components/src/scss/ABackdrop.scss?060f","webpack:///./node_modules/@ecomplus/storefront-components/src/scss/ABackdrop.scss","webpack:///./node_modules/@ecomplus/storefront-components/src/scss/SearchEngine.scss?6bef","webpack:///./node_modules/@ecomplus/storefront-components/src/scss/SearchEngine.scss?297b","webpack:///./node_modules/@ecomplus/storefront-components/src/scss/SearchEngine.scss","webpack:///./node_modules/@ecomplus/storefront-components/src/js/SearchEngine.js","webpack:///./node_modules/@ecomplus/storefront-components/src/js/SearchEngine.js?5ac1","webpack:///./node_modules/@ecomplus/storefront-components/src/SearchEngine.vue","webpack:///./node_modules/@ecomplus/storefront-template/template/js/lib/fallback-404.js"],"names":["map","self","path","location","pathname","slug","slice","url","storeId","replace","storefront","then","response","val","data","GET","resource","resourceId","split","_id","err","Error","resolve","route","Promise","reject","store","body","catch","promises","routes","forEach","push","result","Array","isArray","name","sku","find","all","setupStore","domain","updateConfig","hostname","platform","prop","_config","set","lang","default_lang","toUpperCase","store_id","window","this","$ecomConfig","get","arguments","list","content","module","i","locals","exports","add","default","props","isVisible","type","Boolean","zIndexOnShow","Number","transitionMs","opacity","zIndex","top","computed","style","transition","methods","hide","$emit","lockBodyScroll","document","maxWidth","offsetWidth","overflow","watch","setTimeout","mounted","component","_vm","_h","$createElement","_self","_c","staticClass","on","___CSS_LOADER_API_IMPORT___","resetEcomSearch","ecomSearch","term","page","defaultSort","reset","setSortOrder","setSearchTerm","setPageNumber","components","Portal","ABackdrop","ProductCard","String","pageSize","brands","categories","isFixedBrands","isFixedCategories","defaultFilters","Object","autoFixScore","isFilterable","hasPopularItems","canLoadMore","loadMoreSelector","canRetry","canShowItems","productCardProps","gridsData","grids","suggestedTerm","resultItems","totalSearchResults","hasSearched","noResultsTerm","keepNoResultsTerm","filters","lastSelectedFilter","selectedOptions","selectedSortOption","countOpenRequests","lastRequestId","isScheduled","isLoadingMore","hasNetworkError","popularItems","hasSetPopularItems","isAsideVisible","searchFilterId","i19clearFilters","i18n","i19closeFilters","i19didYouMean","i19filter","i19filterResults","i19itemsFound","i19noResultsFor","i19popularProducts","i19refineSearch","i19relevance","i19results","i19searchAgain","i19searchingFor","i19searchOfflineErrorMsg","i19sort","EcomSearch","isSearching","hasEmptyResult","length","sortOptions","value","label","i19sales","i19lowestPrice","i19highestPrice","i19releases","i19name","hasSelectedOptions","filter","isNavVisible","isResultsVisible","suggestedItems","hasFilters","options","loadObserver","lozad","load","fetchItems","isRetry","isPopularItems","requestId","Date","now","Math","ceil","fetching","setPageSize","fetch","handleSearchResult","getItems","console","error","status","finally","updateFilters","updatedFilters","addFilter","isSpec","filterIndex","findIndex","filterObj","presetedOptions","toLowerCase","key","indexOf","optionsList","option","$set","getBrands","getCategories","getSpecs","index","_","includes","handleSuggestions","suggestTerm","canAutoFix","getTermSuggestions","text","opt","optTerm","score","RegExp","history","shift","getTotalCount","concat","setFilterOption","$nextTick","scheduleFetch","resetAndFetch","handlePresetedOptions","toggleFilters","getFilterLabel","i19brands","i19categories","grid","grid_id","title","charAt","updateSearchFilter","setOptions","undefined","setBrandNames","setCategoryNames","mergeFilter","terms","setSpec","isSet","optionIndex","splice","clearFilters","sort","observe","created","$fallback404","$","URLSearchParams","search","router","EcomRouter","html","renderNotFound","class","pt_br","en_us","append","Vue","render","h","TheProduct","productId","SearchEngine","vueInstance","$mount"],"mappings":"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","file":"chunk.ca87dfed14afc26764db.js","sourcesContent":["import { storefront } from '@ecomplus/client'\n\nconst map = (self, [path]) => {\n  if (!path) {\n    // get pathname from current location interface\n    path = self.location.pathname\n  }\n  // map page resource and object based on slug\n  const slug = typeof path === 'string' ? path.slice(1) : null\n  // replace / with $ on slug to escape URL\n  const url = '/' + self.storeId + '@' + slug.replace(/\\//g, '$') + '.json'\n\n  // send request to E-Com Plus Storefront API\n  return storefront({ url }).then(response => {\n    // { \"GET\": \"[resource]@[id]\" }\n    const val = response.data.GET\n    if (val) {\n      const [resource, resourceId] = val.split('@')\n      if (resourceId) {\n        // returns object with resource info on promise chain\n        return {\n          path,\n          resource,\n          _id: resourceId\n        }\n      }\n    }\n\n    // throw error to handle promise catch\n    const err = new Error('Resource not found, invalid slug or store ID')\n    // simulate axios error object\n    err.response = response\n    throw err\n  })\n}\n\n/**\n * @typedef {object} route\n * @property {string} path - Route URL pathname\n * @property {string} resource - Route resource type from\n * [E-Com Plus Store API]{@link https://developers.e-com.plus/docs/api/#/store/}\n * @property {string} _id - Route document Object ID from\n * [E-Com Plus Store API]{@link https://developers.e-com.plus/docs/api/#/store/}\n * @property {string} [name] - Route document name (not set on products)\n */\n\n/**\n * @method\n * @name EcomRouter#map\n * @description Get page resource and object ID based on URL pathname.\n *\n * @param {string} [path=location.pathname] - URL pathname\n * @returns {Promise<route|error>}\n *\n * @example\n\n// Mapping resource and object ID from current location pathname\nrouter.map()\n  .then(route => {\n    console.log(route.path)\n    console.log(route.resource)\n    console.log(route._id)\n  })\n  .catch(error => {\n    console.error(error)\n    if (error.response) {\n      console.log(error.response)\n    }\n  })\n\n * @example\n\n// Specifying some URL pathname\nrouter.map('/monitores')\n  .then(route => console.log(route))\n  .catch(error => console.error(error))\n\n */\n\nexport default map\n","import { store } from '@ecomplus/client'\n\nconst resolve = (self, [route]) => new Promise((resolve, reject) => {\n  // handle new route\n  const { storeId } = self\n  const { resource, _id } = route\n\n  if (resource && _id) {\n    // get current page object from Store API\n    store({ url: `/${resource}/${_id}.json`, storeId })\n      .then(({ data }) => {\n        // save object body on context\n        resolve({ resource, body: data })\n      })\n      .catch(reject)\n  } else {\n    // skip request and just reject with new error\n    const err = new Error('Invalid route resource or object ID')\n    err.response = {}\n    reject(err)\n  }\n})\n\n/**\n * @typedef {object} context\n * @property {string} resource - Context resource type from\n * [E-Com Plus Store API]{@link https://developers.e-com.plus/docs/api/#/store/}\n * @property {object} body - Context\n * [Store API]{@link https://developers.e-com.plus/docs/api/#/store/}\n * document body for respective route\n */\n\n/**\n * @method\n * @name EcomRouter#resolve\n * @description Get [Store API]{@link https://developers.e-com.plus/docs/api/#/store/}\n * document body based on route resource and Object ID.\n * <br><br>\n * <b>Tip</b>: Although resolve can be used standalone,\n * you may want to use [map]{@link EcomRouter#map} method first.\n *\n * @param {route} route - Route object to get respective document body\n * @returns {Promise<context|error>}\n *\n * @example\n\n// Get document body for current URL pathname\nrouter.map()\n  .then(route => {\n    router.resolve(route)\n      .then(context => {\n        console.log(context)\n        console.log(context.resource)\n        console.log(context.body)\n        console.log(context.body._id)\n        console.log(context.body.name)\n      })\n      .catch(error => { throw error })\n  })\n  .catch(error => {\n    console.error(error)\n    if (error.response) {\n      console.log(error.response)\n    }\n  })\n\n */\n\nexport default resolve\n","import { store } from '@ecomplus/client'\n\nexport default self => new Promise((resolve, reject) => {\n  const { storeId } = self\n  // list slugs for each resource\n  const promises = []\n  const routes = []\n\n  ;[\n    'products',\n    'categories',\n    'collections',\n    'brands'\n  ].forEach(resource => {\n    promises.push(\n      store({ url: `/${resource}.json`, storeId }).then(response => {\n        const { result } = response.data\n        if (Array.isArray(result)) {\n          result.forEach(({ _id, slug, name, sku }) => {\n            if (slug) {\n              // check it this path is not already in use\n              const path = '/' + slug\n              if (!routes.find(route => route.path === path)) {\n                // add new route object\n                routes.push({ resource, _id, path, name, sku })\n              }\n            }\n          })\n        }\n      })\n    )\n  })\n\n  // resolve when all promises are done\n  Promise.all(promises)\n    .then(() => resolve(routes))\n    .catch(reject)\n})\n\n/**\n * @method\n * @name EcomRouter#list\n * @description List all storefront routes for product, categories, brands and collections.\n *\n * @returns {Promise<route[]|error>}\n *\n * @example\n\n// Listing all routes, then resolving to get each document body\nrouter.list()\n  .then(routes => {\n    routes.forEach(route => {\n      console.log(route.path)\n      console.log(route.resource)\n      console.log(route._id)\n      if (route.name) {\n        console.log('Not a product', route.name)\n      }\n      router.resolve(route)\n        .then(context => {\n          console.log(context.body)\n        })\n        .catch(error => { throw error })\n    })\n  })\n  .catch(error => {\n    console.error(error)\n    if (error.response) {\n      console.log(error.response)\n    }\n  })\n\n */\n","import { _config } from '@ecomplus/utils'\nimport { platform } from '@ecomplus/client'\n\nconst setupStore = (self, [domain, updateConfig = true]) => {\n  if (!domain) {\n    // get domain from current location interface\n    domain = self.location.hostname\n  }\n  const url = '/domains/' + domain + '.json'\n\n  // send request to E-Com Plus Platform API\n  return platform({ url }).then(({ data }) => {\n    if (updateConfig) {\n      // set Store IDs on config\n      ;['store_id', 'store_object_id', 'channel_id'].forEach(prop => _config.set(prop, data[prop]))\n\n      // check for default sales channel language\n      const lang = data.default_lang\n      if (lang) {\n        // set default lang and country codes\n        _config.set('lang', lang)\n        _config.set('country_code', lang.replace(/^[a-z]{2}_/, '').toUpperCase())\n        if (lang === 'pt_br') {\n          // also change default currency\n          _config.set('currency', 'BRL')\n          _config.set('currency_symbol', 'R$')\n        }\n      }\n    }\n\n    // update instance Store ID\n    self.storeId = data.store_id\n    // returns channel info object on promise chain\n    return data\n  })\n}\n\n/**\n * @typedef {object} channel\n * @property {number} store_id - Sales channel Store ID\n * @property {string} store_object_id - Sales channel Store Object ID\n * @property {number} channel_id - Sales channel ID number\n * @property {string} [default_lang] - Sales channel default language code\n */\n\n/**\n * @method\n * @name EcomRouter#setupStore\n * @description Get Store IDs and default lang (and set on `_config`) based on domain name.\n *\n * @param {string} [domain=location.hostname] - Sales channel domain name\n * @param {boolean} [updateConfig=true] - Update global configs from `ecomUtils._config`\n * @returns {Promise<channel|error>}\n *\n * @example\n\n// Using current location URL\nrouter.setupStore()\n  .then(channel => {\n    console.log(channel.store_id)\n    console.log(channel.store_object_id)\n    console.log(channel)\n  })\n  .catch(error => {\n    console.error(error)\n    if (error.response) {\n      console.log(error.response)\n    }\n  })\n\n * @example\n\n// Specifying domain name and disabling `ecomUtils._config` update\nrouter.setupStore('shop-plus.e-com.plus', false)\n  .then(channel => console.log(channel))\n  .catch(error => console.error(error))\n\n */\n\nexport default setupStore\n","/**\n * Universal JS router for E-Com Plus storefront.\n * {@link https://github.com/ecomclub/storefront-router GitHub}\n *\n * @module @ecomplus/storefront-router\n * @author E-Com Club <ti@e-com.club>\n * @return {@link EcomRouter}\n * @see EcomRouter\n *\n * @example\n * // ES import default\n * import EcomRouter from '@ecomplus/storefront-router'\n *\n * @example\n * // With CommonJS\n * const EcomRouter = require('@ecomplus/storefront-router')\n *\n * @example\n * <!-- Global `EcomRouter` from CDN on browser -->\n * <script src=\"https://cdn.jsdelivr.net/npm/@ecomplus/storefront-router/dist/ecom-router.var.min.js\"></script>\n *\n * @example\n * <!-- Bundle from CDN with `ecomUtils` and `ecomClient` -->\n * <script\n *   src=\"https://cdn.jsdelivr.net/npm/@ecomplus/storefront-router/dist/ecom-router.bundle.min.js\"\n * ></script>\n */\n\nimport { $ecomConfig } from '@ecomplus/utils'\nimport map from './methods/map'\nimport resolve from './methods/resolve'\nimport list from './methods/list'\nimport setupStore from './methods/setup-store'\n\nexport default function (storeId, location = typeof window === 'object' && window.location) {\n  const self = this\n\n  /**\n   * Respective Store ID number\n   * @name EcomRouter#storeId\n   * @type {number}\n   */\n  this.storeId = storeId || $ecomConfig.get('store_id')\n\n  /**\n   * [Location interface]{@link https://developer.mozilla.org/en-US/docs/Web/API/Location}\n   * @name EcomRouter#location\n   * @type {object}\n   */\n  this.location = location\n\n  this.map = function () {\n    return map(self, arguments)\n  }\n\n  this.resolve = function () {\n    return resolve(self, arguments)\n  }\n\n  this.list = function () {\n    return list(self, arguments)\n  }\n\n  this.setupStore = function () {\n    return setupStore(self, arguments)\n  }\n}\n\n/**\n * Construct a new storefront router object.\n * @class EcomRouter\n * @param {number} [storeId=_config.get('store_id')] - Preset Store ID number\n * @param {object} [location=window.location] -\n * [Location interface]{@link https://developer.mozilla.org/en-US/docs/Web/API/Location}\n *\n * @example\n\nconst router = new EcomRouter()\n\n *\n * @example\n\n// Defining Store ID and using custom location interface\nconst storeId = 2000\nconst router = new EcomRouter(storeId, DOM.location)\n// P.S.: You may want to use custom location when using jsdom on Node.js for example\n\n */\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../css-loader/dist/cjs.js??ref--0-oneOf-0-1!../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../resolve-url-loader/index.js??ref--0-oneOf-0-2!../../../../postcss-loader/dist/cjs.js??ref--0-oneOf-0-3!../../../../sass-loader/dist/cjs.js??ref--0-oneOf-0-4!./ABackdrop.scss?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6cc07505\", content, true, {});","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"backdrop\",style:(_vm.style),on:{\"click\":_vm.hide}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../babel-loader/lib/index.js??ref--1!./ABackdrop.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../babel-loader/lib/index.js??ref--1!./ABackdrop.js?vue&type=script&lang=js&\"","export default {\n  name: 'ABackdrop',\n\n  props: {\n    isVisible: {\n      type: Boolean,\n      default: true\n    },\n    zIndexOnShow: {\n      type: Number,\n      default: 1080\n    },\n    transitionMs: {\n      type: Number,\n      default: 150\n    }\n  },\n\n  data () {\n    return {\n      opacity: 0,\n      zIndex: null,\n      top: null\n    }\n  },\n\n  computed: {\n    style () {\n      const { top, zIndex, transitionMs, opacity } = this\n      return {\n        top,\n        transition: `opacity ${transitionMs}ms linear`,\n        opacity,\n        zIndex\n      }\n    }\n  },\n\n  methods: {\n    hide () {\n      this.$emit('update:is-visible', false)\n      this.$emit('hide')\n    },\n\n    lockBodyScroll () {\n      document.body.style.maxWidth = `${document.body.offsetWidth}px`\n      document.body.style.overflow = 'hidden'\n    }\n  },\n\n  watch: {\n    isVisible (isVisible) {\n      if (isVisible) {\n        this.opacity = null\n        this.lockBodyScroll()\n      } else {\n        this.opacity = 0\n        document.body.style.overflow = document.body.style.maxWidth = null\n      }\n    },\n\n    opacity (opacity) {\n      if (opacity === 0) {\n        setTimeout(() => {\n          this.top = this.zIndex = null\n        }, this.transitionMs)\n      } else {\n        this.zIndex = this.zIndexOnShow\n        this.top = 0\n      }\n    }\n  },\n\n  mounted () {\n    if (this.isVisible) {\n      setTimeout(() => {\n        this.opacity = null\n      }, this.transitionMs)\n      this.lockBodyScroll()\n    }\n  }\n}\n","import { render, staticRenderFns } from \"./html/ABackdrop.html?vue&type=template&id=01ebe4cc&lang=html&\"\nimport script from \"./js/ABackdrop.js?vue&type=script&lang=js&\"\nexport * from \"./js/ABackdrop.js?vue&type=script&lang=js&\"\nimport style0 from \"./scss/ABackdrop.scss?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../vue-style-loader/index.js!../../../../css-loader/dist/cjs.js??ref--0-oneOf-0-1!../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../resolve-url-loader/index.js??ref--0-oneOf-0-2!../../../../postcss-loader/dist/cjs.js??ref--0-oneOf-0-3!../../../../sass-loader/dist/cjs.js??ref--0-oneOf-0-4!./ABackdrop.scss?vue&type=style&index=0&lang=scss&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".backdrop{position:fixed;top:-100vh;left:0;width:100vw;height:100vh;background-color:var(--dark);opacity:.65;cursor:pointer;z-index:-100}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../css-loader/dist/cjs.js??ref--0-oneOf-0-1!../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../resolve-url-loader/index.js??ref--0-oneOf-0-2!../../../../postcss-loader/dist/cjs.js??ref--0-oneOf-0-3!../../../../sass-loader/dist/cjs.js??ref--0-oneOf-0-4!./SearchEngine.scss?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6640bcbb\", content, true, {});","export * from \"-!../../../../vue-style-loader/index.js!../../../../css-loader/dist/cjs.js??ref--0-oneOf-0-1!../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../resolve-url-loader/index.js??ref--0-oneOf-0-2!../../../../postcss-loader/dist/cjs.js??ref--0-oneOf-0-3!../../../../sass-loader/dist/cjs.js??ref--0-oneOf-0-4!./SearchEngine.scss?vue&type=style&index=0&lang=scss&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".search-engine{position:relative}.search-engine__nav{padding:var(--spacer-2);margin-bottom:var(--spacer-3);background:var(--light);color:var(--gray)}.search-engine__nav>div{display:flex;align-items:center;justify-content:space-between}.search-engine__toggles{display:flex}.search-engine__toggles button{margin-left:var(--spacer-1);color:var(--secondary)}.search-engine__count{position:relative}.search-engine__spinner{position:absolute;top:50%;right:-3rem;width:1.75rem;height:1.75rem;margin-top:-.875rem;color:var(--secondary)}.search-engine__aside{position:fixed;width:280px;max-width:100%;height:100%;top:0;right:0;z-index:1100;border-radius:0}.search-engine__aside .card-body{overflow-y:auto}.search-engine__aside-open{position:fixed;right:0;bottom:50vh;text-align:right;z-index:890;border-top-right-radius:0;border-bottom-right-radius:0}.search-engine__aside-open .spinner-border{margin-bottom:3px}.search-engine__aside-open .fa-search{opacity:.6}.search-engine__filter:not(:first-child){margin-top:var(--spacer-2)}.search-engine__filter:last-child{margin-bottom:var(--spacer-4)}.search-engine__filter button{padding-left:0;color:var(--secondary);font-size:var(--font-size-lg);font-weight:var(--font-light)}.search-engine__filter button i,.search-engine__filter button svg{font-size:var(--font-size);margin-right:var(--spacer-1);color:var(--gray);opacity:.5;transition:opacity .25s}.search-engine__filter button .fa-chevron-up,.search-engine__filter button[aria-expanded=true] .fa-chevron-down{display:none}.search-engine__filter button[aria-expanded=true] .fa-chevron-up{display:inherit}.search-engine__filter button:hover i,.search-engine__filter button:hover svg{opacity:1}.search-engine__filter button:focus{box-shadow:none}.search-engine__option{color:var(--primary-light)}.search-engine__option small{color:var(--gray)}.search-engine__selected{margin-left:var(--spacer-2);margin-bottom:var(--spacer-2)}.search-engine__selected>small{color:var(--gray)}.search-engine__selected>small:before{content:\\\" / \\\"}.search-engine__info{padding-bottom:var(--spacer-3)}.search-engine__terms>span{font-weight:var(--font-light)}.search-engine__terms>span:not(:last-of-type){color:var(--text-muted)}.search-engine__retail{padding:var(--spacer-2) 0}.search-engine__item{margin-bottom:var(--spacer-3)}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import {\n  i19brands,\n  i19categories,\n  i19clearFilters,\n  i19closeFilters,\n  i19didYouMean,\n  i19filter,\n  i19filterResults,\n  i19highestPrice,\n  i19itemsFound,\n  i19lowestPrice,\n  i19name,\n  i19noResultsFor,\n  i19popularProducts,\n  i19refineSearch,\n  i19releases,\n  i19relevance,\n  i19results,\n  i19sales,\n  i19searchAgain,\n  i19searchingFor,\n  i19searchOfflineErrorMsg,\n  i19sort\n} from '@ecomplus/i18n'\n\nimport { i18n } from '@ecomplus/utils'\nimport lozad from 'lozad'\nimport EcomSearch from '@ecomplus/search-engine'\nimport { Portal } from '@linusborg/vue-simple-portal'\nimport ABackdrop from '../ABackdrop.vue'\nimport ProductCard from '../ProductCard.vue'\n\nconst resetEcomSearch = ({ ecomSearch, term, page, defaultSort }) => {\n  ecomSearch.reset()\n  if (defaultSort) {\n    ecomSearch.setSortOrder(defaultSort)\n  }\n  if (term) {\n    ecomSearch.setSearchTerm(term)\n  }\n  if (page) {\n    ecomSearch.setPageNumber(page)\n  }\n}\n\nexport default {\n  name: 'SearchEngine',\n\n  components: {\n    Portal,\n    ABackdrop,\n    ProductCard\n  },\n\n  props: {\n    term: String,\n    page: {\n      type: Number,\n      default: 1\n    },\n    pageSize: {\n      type: Number,\n      default: 24\n    },\n    brands: Array,\n    categories: Array,\n    isFixedBrands: Boolean,\n    isFixedCategories: Boolean,\n    defaultSort: String,\n    defaultFilters: Object,\n    autoFixScore: {\n      type: Number,\n      default: 0.6\n    },\n    isFilterable: {\n      type: Boolean,\n      default: true\n    },\n    hasPopularItems: {\n      type: Boolean,\n      default: true\n    },\n    canLoadMore: {\n      type: Boolean,\n      default: true\n    },\n    loadMoreSelector: String,\n    canRetry: {\n      type: Boolean,\n      default: true\n    },\n    canShowItems: {\n      type: Boolean,\n      default: true\n    },\n    productCardProps: Object,\n    gridsData: {\n      type: Array,\n      default () {\n        if (typeof window === 'object' && window.storefront && window.storefront.data) {\n          return window.storefront.data.grids\n        }\n      }\n    }\n  },\n\n  data () {\n    return {\n      suggestedTerm: '',\n      resultItems: [],\n      totalSearchResults: 0,\n      hasSearched: false,\n      noResultsTerm: '',\n      keepNoResultsTerm: false,\n      filters: [],\n      lastSelectedFilter: null,\n      selectedOptions: {},\n      selectedSortOption: null,\n      countOpenRequests: 0,\n      lastRequestId: null,\n      isScheduled: false,\n      isLoadingMore: false,\n      hasNetworkError: false,\n      popularItems: [],\n      hasSetPopularItems: false,\n      isAsideVisible: false,\n      searchFilterId: 0\n    }\n  },\n\n  computed: {\n    i19clearFilters: () => i18n(i19clearFilters),\n    i19closeFilters: () => i18n(i19closeFilters),\n    i19didYouMean: () => i18n(i19didYouMean),\n    i19filter: () => i18n(i19filter),\n    i19filterResults: () => i18n(i19filterResults),\n    i19itemsFound: () => i18n(i19itemsFound),\n    i19noResultsFor: () => i18n(i19noResultsFor),\n    i19popularProducts: () => i18n(i19popularProducts),\n    i19refineSearch: () => i18n(i19refineSearch),\n    i19relevance: () => i18n(i19relevance),\n    i19results: () => i18n(i19results),\n    i19searchAgain: () => i18n(i19searchAgain),\n    i19searchingFor: () => i18n(i19searchingFor),\n    i19searchOfflineErrorMsg: () => i18n(i19searchOfflineErrorMsg),\n    i19sort: () => i18n(i19sort),\n\n    ecomSearch: () => new EcomSearch(),\n\n    isSearching () {\n      return this.countOpenRequests > 0\n    },\n\n    hasEmptyResult () {\n      return this.hasSearched && !this.resultItems.length\n    },\n\n    sortOptions: () => [\n      {\n        value: null,\n        label: i18n(i19relevance)\n      }, {\n        value: 'sales',\n        label: i18n(i19sales)\n      }, {\n        value: 'lowest_price',\n        label: i18n(i19lowestPrice)\n      }, {\n        value: 'highest_price',\n        label: i18n(i19highestPrice)\n      }, {\n        value: 'news',\n        label: i18n(i19releases)\n      }, {\n        value: 'slug',\n        label: i18n(i19name)\n      }\n    ],\n\n    hasSelectedOptions () {\n      for (const filter in this.selectedOptions) {\n        if (this.selectedOptions[filter] && this.selectedOptions[filter].length) {\n          return true\n        }\n      }\n      return false\n    },\n\n    isNavVisible () {\n      return this.hasSearched && this.isFilterable &&\n        (this.isSearching || this.totalSearchResults > 8 || this.hasSelectedOptions)\n    },\n\n    isResultsVisible () {\n      return (this.hasSearched && !this.isSearching) || this.suggestedItems.length\n    },\n\n    hasFilters () {\n      return this.hasSelectedOptions ||\n        this.filters.find(({ options }) => options.length)\n    },\n\n    suggestedItems () {\n      return this.resultItems.length ? this.resultItems : this.popularItems\n    },\n\n    loadObserver () {\n      return this.canLoadMore && lozad('#search-engine-load-more', {\n        load: () => {\n          this.isLoadingMore = true\n          this.fetchItems()\n        }\n      })\n    }\n  },\n\n  methods: {\n    fetchItems (isRetry, isPopularItems) {\n      const ecomSearch = isPopularItems ? new EcomSearch() : this.ecomSearch\n      const requestId = Date.now()\n      this.countOpenRequests++\n      this.lastRequestId = requestId\n      if (this.isLoadingMore) {\n        ecomSearch.setPageNumber(this.page + Math.ceil(this.resultItems.length / this.pageSize))\n      }\n      const fetching = ecomSearch.setPageSize(this.pageSize).fetch()\n        .then(result => {\n          if (this.lastRequestId === requestId) {\n            this.hasNetworkError = false\n            if (!isPopularItems) {\n              this.handleSearchResult()\n            }\n          }\n          if (isPopularItems || (!this.term && !this.brands && !this.categories)) {\n            this.hasSetPopularItems = true\n            this.popularItems = ecomSearch.getItems()\n          }\n          return result\n        })\n        .catch(err => {\n          console.error(err)\n          if (this.lastRequestId === requestId || isPopularItems) {\n            if (this.canRetry && !isRetry && (!err.response || err.response.status !== 400)) {\n              this.fetchItems(true, isPopularItems)\n            } else {\n              this.hasNetworkError = true\n            }\n          }\n        })\n        .finally(() => {\n          this.countOpenRequests--\n          this.isLoadingMore = false\n        })\n      this.$emit('fetch', { ecomSearch, fetching })\n    },\n\n    updateFilters () {\n      const updatedFilters = []\n      const addFilter = (filter, options, isSpec) => {\n        let filterIndex = this.filters.findIndex(filterObj => filterObj.filter === filter)\n        if (filter !== this.lastSelectedFilter) {\n          if (filterIndex === -1) {\n            filterIndex = this.filters.length\n          }\n          if (this[`isFixed${filter}`]) {\n            const presetedOptions = this[filter.toLowerCase()]\n            if (presetedOptions) {\n              options = options.filter(({ key }) => presetedOptions.indexOf(key) === -1)\n            }\n          }\n          this.filters[filterIndex] = {\n            filter,\n            options,\n            isSpec\n          }\n          const optionsList = !this.selectedOptions[filter]\n            ? []\n            : this.selectedOptions[filter]\n              .filter(option => options.find(({ key }) => key === option))\n          this.$set(this.selectedOptions, filter, optionsList)\n        }\n        updatedFilters.push(filterIndex)\n      }\n      addFilter('Brands', this.ecomSearch.getBrands())\n      addFilter('Categories', this.ecomSearch.getCategories())\n      this.ecomSearch.getSpecs().forEach(({ key, options }, index) => {\n        addFilter(key, options, true)\n      })\n      this.filters = this.filters.filter((_, i) => updatedFilters.includes(i))\n      this.searchFilterId = Date.now()\n    },\n\n    handleSuggestions () {\n      if (this.term) {\n        const { ecomSearch } = this\n        const term = this.term.toLowerCase()\n        let suggestTerm = term\n        let canAutoFix = false\n        this.suggestedTerm = ''\n        ecomSearch.getTermSuggestions().forEach(({ options, text }) => {\n          if (options.length) {\n            const opt = options[0]\n            const optTerm = opt.text.toLowerCase()\n            if (\n              !this.totalSearchResults &&\n              this.autoFixScore > 0 &&\n              opt.score >= this.autoFixScore &&\n              optTerm.indexOf(term) === -1\n            ) {\n              canAutoFix = true\n            }\n            suggestTerm = suggestTerm.replace(new RegExp(text, 'i'), optTerm)\n          }\n        })\n        if (!this.keepNoResultsTerm) {\n          this.noResultsTerm = ''\n        } else {\n          this.keepNoResultsTerm = false\n        }\n        if (suggestTerm !== term) {\n          if (canAutoFix) {\n            this.noResultsTerm = term\n            this.keepNoResultsTerm = true\n            this.$emit('update:term', suggestTerm)\n          } else {\n            this.suggestedTerm = suggestTerm\n          }\n          ecomSearch.history.shift()\n        }\n      }\n    },\n\n    handleSearchResult () {\n      const { ecomSearch } = this\n      this.totalSearchResults = ecomSearch.getTotalCount()\n      this.resultItems = this.isLoadingMore\n        ? this.resultItems.concat(ecomSearch.getItems())\n        : ecomSearch.getItems()\n      this.updateFilters()\n      if (!this.hasSearched && this.defaultFilters) {\n        for (const filter in this.defaultFilters) {\n          const options = this.defaultFilters[filter]\n          if (Array.isArray(options)) {\n            options.forEach(option => this.setFilterOption(filter, option, true))\n          } else if (typeof options === 'string') {\n            this.setFilterOption(filter, options, true)\n          }\n        }\n      }\n      this.handleSuggestions()\n      if (!this.totalSearchResults && this.hasPopularItems && !this.hasSetPopularItems) {\n        this.fetchItems(false, true)\n      }\n      this.$emit(this.isLoadingMore ? 'load-more' : 'search', { ecomSearch })\n      if (!this.hasSearched) {\n        this.$nextTick(() => {\n          setTimeout(() => {\n            this.hasSearched = true\n          }, 100)\n        })\n      }\n    },\n\n    scheduleFetch () {\n      if (!this.isScheduled) {\n        this.isScheduled = true\n        this.$nextTick(() => {\n          setTimeout(() => {\n            this.fetchItems()\n            this.isScheduled = false\n          }, 30)\n        })\n      }\n    },\n\n    resetAndFetch () {\n      resetEcomSearch(this)\n      this.handlePresetedOptions()\n      this.scheduleFetch()\n    },\n\n    toggleFilters (isVisible) {\n      this.isAsideVisible = typeof isVisible === 'boolean'\n        ? isVisible\n        : !this.isAsideVisible\n    },\n\n    getFilterLabel (filter) {\n      switch (filter) {\n        case 'Brands':\n          return i18n(i19brands)\n        case 'Categories':\n          return i18n(i19categories)\n        default:\n          if (this.gridsData) {\n            const grid = this.gridsData.find(grid => grid.grid_id === filter)\n            if (grid) {\n              return grid.title || grid.grid_id\n            }\n          }\n      }\n      return filter\n    },\n\n    handlePresetedOptions () {\n      ;['brands', 'categories'].forEach(prop => {\n        if (this[prop] && this[prop].length) {\n          const filter = prop.charAt(0).toUpperCase() + prop.slice(1)\n          if (!this[`isFixed${filter}`]) {\n            this.selectedOptions[filter] = this[prop]\n          }\n          this.updateSearchFilter(filter)\n        }\n      })\n    },\n\n    updateSearchFilter (filter) {\n      const { ecomSearch } = this\n      let setOptions = this.selectedOptions[filter]\n      if (setOptions === undefined || !setOptions.length) {\n        setOptions = null\n      }\n      switch (filter) {\n        case 'Brands':\n          if (this.isFixedBrands && this.brands) {\n            setOptions = setOptions ? setOptions.concat(this.brands) : this.brands\n          }\n          ecomSearch.setBrandNames(setOptions)\n          break\n        case 'Categories':\n          ecomSearch.setCategoryNames(setOptions)\n          if (this.isFixedCategories && this.categories) {\n            ecomSearch.mergeFilter({\n              terms: {\n                'categories.name': this.categories\n              }\n            })\n          }\n          break\n        default:\n          ecomSearch.setSpec(filter, setOptions)\n      }\n    },\n\n    setFilterOption (filter, option, isSet) {\n      const { selectedOptions } = this\n      const optionsList = selectedOptions[filter]\n      if (optionsList) {\n        const optionIndex = optionsList.indexOf(option)\n        if (isSet) {\n          if (optionIndex === -1) {\n            this.lastSelectedFilter = filter\n            optionsList.push(option)\n          }\n        } else {\n          if (optionIndex > -1) {\n            optionsList.splice(optionIndex, 1)\n          }\n          if (!optionsList.length && this.lastSelectedFilter === filter) {\n            this.lastSelectedFilter = null\n          }\n        }\n        this.updateSearchFilter(filter)\n        this.scheduleFetch()\n      }\n    },\n\n    clearFilters () {\n      const { selectedOptions } = this\n      for (const filter in selectedOptions) {\n        if (selectedOptions[filter]) {\n          selectedOptions[filter] = []\n          this.updateSearchFilter(filter)\n        }\n      }\n      this.fetchItems()\n    },\n\n    setSortOrder (sort) {\n      this.selectedSortOption = sort\n      this.ecomSearch.setSortOrder(sort)\n      if (this.page > 1) {\n        this.page = 1\n      } else {\n        this.scheduleFetch()\n      }\n    }\n  },\n\n  watch: {\n    term () {\n      this.resetAndFetch()\n    },\n    brands () {\n      this.resetAndFetch()\n    },\n    categories () {\n      this.resetAndFetch()\n    },\n\n    page (page) {\n      this.ecomSearch.setPageNumber(page)\n      this.scheduleFetch()\n    },\n\n    isSearching (isSearching) {\n      if (!isSearching && this.loadObserver) {\n        this.$nextTick(() => {\n          this.loadObserver.observe()\n        })\n      }\n    }\n  },\n\n  created () {\n    resetEcomSearch(this)\n    this.handlePresetedOptions()\n    this.fetchItems()\n  }\n}\n","import mod from \"-!../../../../babel-loader/lib/index.js??ref--1!./SearchEngine.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../babel-loader/lib/index.js??ref--1!./SearchEngine.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./html/SearchEngine.html?vue&type=template&id=a94588d8&lang=html&\"\nimport script from \"./js/SearchEngine.js?vue&type=script&lang=js&\"\nexport * from \"./js/SearchEngine.js?vue&type=script&lang=js&\"\nimport style0 from \"./scss/SearchEngine.scss?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { i18n } from '@ecomplus/utils'\nimport EcomRouter from '@ecomplus/storefront-router'\nimport { $ } from '@ecomplus/storefront-twbs'\nimport Vue from 'vue'\nimport TheProduct from '#components/TheProduct.vue'\nimport SearchEngine from '#components/SearchEngine.vue'\n\nconst $fallback404 = $('#fallback-404')\nif ($fallback404.length) {\n  const urlParams = new URLSearchParams(window.location.search)\n  const url = urlParams.get('url')\n  if (url) {\n    const router = new EcomRouter()\n    $fallback404.html('<div class=\"spinner-border\" role=\"status\"></div>')\n\n    const renderNotFound = () => {\n      $fallback404.html($('<h3>', {\n        class: 'my-4',\n        html: [\n          '<i class=\"text-muted fas fa-exclamation-triangle mr-3\"></i>',\n          i18n({\n            pt_br: 'Pgina no encontrada',\n            en_us: 'Page not found'\n          })\n        ]\n      }))\n\n      router.list()\n        .then(routes => {\n          $fallback404.append([\n            $('<p>', {\n              class: 'lead',\n              html: i18n({\n                pt_br: 'Mapa do site:',\n                en_us: 'Sitemap:'\n              })\n            }),\n            $('<ul>', {\n              html: routes.map(({ path }) => {\n                return `<li><a href=\"${path}\">${path}</a></li>`\n              })\n            })\n          ])\n        })\n        .catch(console.error)\n    }\n\n    router.map(url)\n      .then(route => {\n        const { resource, _id } = route\n        switch (resource) {\n          case 'products':\n            return new Vue({\n              render: h => h(TheProduct, {\n                props: {\n                  productId: _id\n                }\n              })\n            })\n\n          case 'brands':\n          case 'categories':\n            return router.resolve(route)\n              .then(({ body }) => {\n                return new Vue({\n                  render: h => h(SearchEngine, {\n                    props: {\n                      [resource]: [body.name]\n                    }\n                  })\n                })\n              })\n        }\n      })\n\n      .then(vueInstance => {\n        if (vueInstance) {\n          vueInstance.$mount($fallback404[0])\n        } else {\n          renderNotFound()\n        }\n      })\n\n      .catch(err => {\n        console.error(err)\n        renderNotFound()\n      })\n  }\n}\n"],"sourceRoot":""}